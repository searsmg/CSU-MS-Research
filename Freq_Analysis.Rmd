---
title: "Cameron Peak Fire Frequency Analysis"
author: "MGS"
date: "8/28/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(RNRCS)
library(lubridate)
library(dplyr)
```

```{r}
#download Joe Wright SNOTEL data from WY 2010 to present and add as a df. Also, get date into correct format.
JW_SNOTEL <- grabNRCS.data(network = "SNTL", site_id = 551, timescale = "daily", DayBgn = '2009-10-01', DayEnd = '2020-08-27') %>%
  mutate(Date = ymd(Date))

#add a columns to get SWE and Precip in mm
JW_SNOTEL$SWE_mm <- JW_SNOTEL$Snow.Water.Equivalent..in..Start.of.Day.Values*25.4
JW_SNOTEL$CumPrecip_mm<-JW_SNOTEL$Precipitation.Accumulation..in..Start.of.Day.Values*25.4

#Since Precip is cumulative - we need to find the total daily values
JW_SNOTEL %>%
  group_by(CumPrecip_mm)
  arrange(Date)
  mutate(diff = value - lag(value, default = firt (value)))

#export the df to csv
write.csv(JW_SNOTEL,"C:/Users/sears/Documents/Research/Snow_Hydro_Research/Fire/JW_SNOTEL_daily.csv", row.names = TRUE)

#determine NAs in SWE_mm
sum(is.na(JW_SNOTEL$SWE_mm))

```

